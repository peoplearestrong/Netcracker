#!groovy
properties ([disableConcurrentBuilds()])


pipeline {
    agent any

    options{
        ansiColor('xterm')
/// Добавить после проверки основного pipeline
 /*     inventoryPath('/etc/ansible/hosts') 
        ansibleName('2.9.0')
        become(true)
*/
    }

    stages {   
        stage ('Java install'){
            steps{
                ansiblePlaybook('/etc/ansible/java_install.yml')
                    inventoryPath('/etc/ansible/hosts')
                    ansibleName('2.9.0')
                    become(true)
            }
        }

        stage ('WilFly install'){
            steps {
                ansiblePlaybook('/etc/ansible/wildfly_install.yml'){
                    inventoryPath('/etc/ansible/hosts')
                    ansibleName('2.9.0')
                    become(true)
                }                
            }
        }

        stage ('Liferay install') {
            steps { 
                ansiblePlaybook('/etc/ansible/jenkins_install.yml'){
                    inventoryPath('/etc/ansible/hosts')
                    ansibleName('2.9.0')
                    become(true)
                }
            }
        }

        stage ('PostgreSQL install'){ 
            steps {
                ansiblePlaybook('/etc/ansible/postgresql_install.yml'){
                    inventoryPath('/etc/ansible/hosts')
                    ansibleName('2.9.0')
                    become(true)
                }
            }
        }
    }
}
